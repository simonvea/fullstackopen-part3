{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","_callee","id","data","init","url","response","regenerator_default","a","wrap","_context","prev","next","method","headers","Content-Type","body","JSON","stringify","concat","fetch","sent","abrupt","json","stop","_callee2","_context2","_callee3","person","_context3","_callee4","persons","_context4","services_persons","getAll","addPerson","deletePerson","updatePerson","Name","_ref","deleteHandler","react_default","createElement","name","number","onClick","Filter","_ref2","filter","handleFilterChange","value","onChange","Form","props","onSubmit","addName","newName","handleNameChange","newNumber","handleNumberChange","type","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setFilter","_useState9","_useState10","alertMessage","setAlertMessage","find","message","window","confirm","updatedPersons","personService","then","res","catch","err","useEffect","console","error","_ref3","color","bgColor","text","msg","_msg","alert","msgStyle","border","backgroundColor","fontSize","borderRadius","padding","width","style","App_Filter","event","target","App_Form","preventDefault","findIndex","nameObject","personData","updatedPerson","objectSpread","map","length","toLowerCase","includes","App_Name","key","filterFunc","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.0a736696.chunk.js","sourcesContent":["\n\nconst baseUrl = \"/api/persons\"\n\nasync function updatePerson(id, data) {\n\n    const init = {\n        method: 'PUT',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n    }\n    const url = `${baseUrl}/${id}`\n    const response = await fetch(url, init)\n    return response.json()\n}\n\nasync function deletePerson(id) {\n    const init = {\n        method: 'DELETE',\n    }\n    const url = `${baseUrl}/${id}`\n    const response = await fetch(url, init)\n\n    return response\n}\n\nasync function addPerson(person) {\n    \n    const init = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(person)\n    }\n    const response = await fetch(baseUrl, init)\n    \n    return response.json()\n  }\n\n\nasync function getAll() {\n    const persons = await fetch(baseUrl)\n    return persons.json()\n}\n\nexport default {getAll, addPerson, deletePerson, updatePerson}","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons.js'\n\nconst Name = ({person, deleteHandler}) => {\n  return (\n    <div>\n       {person.name} {person.number} <button onClick={() => deleteHandler(person.id)}>delete</button>\n    </div>\n  )\n}\n\nconst Filter = ({filter, handleFilterChange}) => {\n  return (\n    <p>filter shown with \n      <input value={filter} onChange={handleFilterChange}/>\n    </p>\n  )\n}\n\nconst Form = (props) => {\n  return (\n    <form onSubmit={props.addName}>\n    <div>\n      name: <input value={props.newName} onChange={props.handleNameChange}/>\n    </div>\n    <div>\n      number: <input value={props.newNumber} onChange={props.handleNumberChange}/>\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ alertMessage, setAlertMessage ] = useState([])\n\n\n  const checkName = (name) => {\n    return persons.findIndex((person) => person.name === name) !== -1\n  }\n\n  const Message = ({msg}) => {\n    const [name, alert] = msg\n    if(!name) {return null}\n\n    let color, bgColor, text;\n\n    if(alert === \"add\") {\n      color = \"green\"\n      bgColor = \"lightgreen\"\n      text = `Added ${name}`\n    } else if (alert === \"error\") {\n      color = \"red\"\n      bgColor = \"rosybrown\"\n      text = `Information of ${name} has already been removed from server`\n    }\n    \n    const msgStyle = {\n      border: `2px solid ${color}`,\n      backgroundColor: `${bgColor}`,\n      fontSize: 16,\n      color: `${color}`,\n      borderRadius: 2,\n      padding: 4,\n      width: 200\n    }\n\n\n    return (\n      <div style={msgStyle}>\n         {text}\n      </div>\n    )\n  }\n\n  const addName = (event) => {\n    event.preventDefault()\n\n    if(checkName(newName)) {\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?` )) {\n        const personData = persons.find(person => person.name === newName)\n        const id = personData.id;\n        const updatedPerson = {...personData, number: newNumber}\n        const updatedPersons = persons.map(person => person.id === id ? updatedPerson : person)\n\n        personService.updatePerson(id, updatedPerson)\n          .then(res => setPersons(updatedPersons))\n          .catch(err => console.error(err))\n\n        return\n      } else {\n        return\n      }\n    }\n\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    }\n    \n    personService.addPerson(nameObject)\n      .then(res => {\n        setPersons(persons.concat(res))\n        setAlertMessage([res.name, \"add\"])\n      })\n      .catch(err => console.error(err))\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const handleFilterChange = (event) => setFilter(event.target.value)\n  const deleteHandler = (id) => {\n    const name = persons.find(person => person.id === id).name\n    const message = `Delete ${name}?`;\n    if(window.confirm(message)) {\n      const updatedPersons = persons.filter(person => person.id !== id)\n      personService.deletePerson(id)\n      .then(res => {\n        setPersons(updatedPersons);\n      })\n      .catch(err => setAlertMessage([name, \"error\"]))\n    } else {\n      return\n    }\n  }\n\n\n\n  const filterFunc = (persons, filter) => {\n    if(filter.length > 0) {\n      persons = persons.filter(person => person.name.toLowerCase().includes(filter))\n    } \n    return persons.map(person => <Name key={person.id} person={person} deleteHandler={deleteHandler}/>)\n  }\n\n  useEffect(() => {\n    personService.getAll()\n    .then(persons => setPersons(persons))\n    .catch(err => console.error(err))\n  }, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n        <Message msg={alertMessage} />\n        <Filter \n          filter={filter}\n          handleFilterChange={handleFilterChange}\n        />\n      <h2>Add a new</h2>\n        <Form \n          addName={addName}\n          newName={newName}\n          handleNameChange={handleNameChange}\n          newNumber={newNumber}\n          handleNumberChange={handleNumberChange}\n        />\n      <h2>Numbers</h2>\n        {filterFunc(persons,filter)}\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}